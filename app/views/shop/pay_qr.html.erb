<h2>微信扫码支付</h2>
<div class="shop-qr">
  <div id="qrcode"></div>
</div>
<p>订单号：<%= @order.out_trade_no %></p>
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
<script>
  if (window.QRCode) {
    QRCode.toCanvas(document.getElementById('qrcode'), "<%= @code_url %>", { width: 240 });
  } else {
    document.getElementById('qrcode').innerHTML = '<a href="<%= @code_url %>" target="_blank">打开支付链接</a>';
  }
</script>